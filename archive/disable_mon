#bin/sh

# Disable monitor mode on the interface
if [ -z "$1" ]; then
    echo "Usage: $0 <interface>"
    exit 1
fi

iface=$1

echo "Disabling monitor mode on $iface"

# Check if the interface is in monitor mode
if ! iw dev | grep -q "type monitor"; then
    echo "Interface $iface is not in monitor mode"
    exit 0
fi

# Bring the interface down and set it to managed mode
echo "Changing $iface to managed mode"
ip link set $iface down
iw dev $iface set type managed
ip link set $iface up
systemctl restart NetworkManager
echo "Interface $iface is now in managed mode"